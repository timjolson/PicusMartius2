#include <Wire.h>
#include <Adafruit_PWMServoDriver.h>

Adafruit_PWMServoDriver pwm = Adafruit_PWMServoDriver();

int i = 255;
int j = 0;
bool change = 0;

void setup()
{
  pwm.begin();
  pwm.setPWMFreq(1000);
  
  /*PWM TIMER SETTINGS*/
  TCCR1B = (TCCR1B & 0b11111000) | 0x01;
  TCCR3B = (TCCR3B & 0b11111000) | 0x01;
  TCCR4B = (TCCR4B & 0b11111000) | 0x01;

  //Motor 1
  pinMode(6, OUTPUT);
  pinMode(25, OUTPUT);
  analogWrite(6, 255);
  digitalWrite(25, LOW);
  
  //Motor 2
  pinMode(3, OUTPUT);
  pinMode(26, OUTPUT);
  analogWrite(3, 255);
  digitalWrite(26, LOW);
  
  //Motor 3
  pinMode(7, OUTPUT);
  pinMode(29, OUTPUT);
  analogWrite(7, 255);
  digitalWrite(29, LOW);
  
  //Motor 4
  pinMode(8, OUTPUT);
  pinMode(24, OUTPUT);
  analogWrite(8, 255);
  digitalWrite(24, LOW);
  
  //Motor 5
  pinMode(12, OUTPUT);
  pinMode(22, OUTPUT);
  analogWrite(12, 255);
  digitalWrite(22, LOW);  
  
  //Motor 6
  pinMode(11, OUTPUT);
  pinMode(23, OUTPUT);
  analogWrite(11, 255);
  digitalWrite(23, LOW);  
  
  //Motor 7
  pinMode(5, OUTPUT);
  pinMode(28, OUTPUT);
  analogWrite(5, 255);
  digitalWrite(28, LOW);  
  
  //Motor 8
  pinMode(2, OUTPUT);
  pinMode(27, OUTPUT);
  analogWrite(2, 255);
  digitalWrite(27, LOW);

  for(j=0; j<16; j++)
  {
    pwm.setPWM(j, 0, 0);
  }
  
  delay(3000);
}

void loop()
{
  for(i = 255; i > 30; i--)
  {
//  //Motor 1
//  analogWrite(6, i);
  
  //Motor 2
  analogWrite(3, i);
  
  //Motor 3
  analogWrite(7, i);
  
//  //Motor 4
//  analogWrite(8, i);
//  
//  //Motor 5
//  analogWrite(12, i);
//  
//  //Motor 6
//  analogWrite(11, i);
//  
  //Motor 7
  analogWrite(5, i);
  
  //Motor 8
  analogWrite(2, i);

  delay(2);
  }
  
  delay(5000);
  
  for(i = 30; i < 255; i++)
  {
//  //Motor 1
//  analogWrite(6, i);
  
  //Motor 2
  analogWrite(3, i);
  
  //Motor 3
  analogWrite(7, i);
  
//  //Motor 4
//  analogWrite(8, i);
//  
//  //Motor 5
//  analogWrite(12, i);
//  
//  //Motor 6
//  analogWrite(11, i);
  
  //Motor 7
  analogWrite(5, i);
  
  //Motor 8
  analogWrite(2, i); 

  delay(2);
  }
  
  change = !change;

  //Motor 1
  digitalWrite(6, HIGH);
  digitalWrite(25, change);
  
  //Motor 2
  digitalWrite(3, HIGH);
  digitalWrite(26, change);
  
  //Motor 3
  digitalWrite(7, HIGH);
  digitalWrite(29, change);
   
  //Motor 4
  digitalWrite(8, HIGH);
  digitalWrite(24, change);
  
  //Motor 5
  digitalWrite(12, HIGH);
  digitalWrite(22, change);  
  
  //Motor 6
  digitalWrite(11, HIGH);
  digitalWrite(23, change);  
  
  //Motor 7
  digitalWrite(5, HIGH);
  digitalWrite(28, change);  
  
  //Motor 8
  digitalWrite(2, HIGH);
  digitalWrite(27, change);

//  pwm.setPWM(0, 0, 4095);
//  delay(3000);
//  pwm.setPWM(0, 0, 0);
//      delay(3000);
}

